#include <bits/stdc++.h>
using namespace std;

int mapping [19][4][2] = {
        {
                {0, 0},
                {0, 1},
                {0, 2},
                {0, 3}
        },
        {
                {0, 0},
                {0, 1},
                {0, 2},
                {1, 1}
        },
        {
                {0, 0},
                {0, 1},
                {0, 2},
                {-1, 1}
        },
        {
                {0, 0},
                {0, 1},
                {1, 1},
                {1, 2}
        },
        {
                {0, 0},
                {0, 1},
                {-1, 1},
                {-1, 2}
        },
        {
                {0, 0},
                {0, 1},
                {0, 2},
                {1, 2}
        },
        {
                {0, 0},
                {0, 1},
                {0, 2},
                {-1, 2}
        },
        {
                {0, 0},
                {0, 1},
                {1, 1},
                {2, 1}
        },
        {
                {0, 0},
                {0, 1},
                {-1, 1},
                {-2, 1}
        },
        {
                {0, 0},
                {0, 1},
                {-1, 1},
                {1, 1}
        },
        {
                {0, 0},
                {1, 0},
                {0, 1},
                {0, 2}
        },
        {
                {0, 0},
                {-1, 0},
                {0, 1},
                {0, 2}
        },
        {
                {0, 0},
                {1, 0},
                {0, 1},
                {1, 1}
        },
        {
                {0, 0},
                {1, 0},
                {0, 1},
                {-1, 1}
        },
        {
                {0, 0},
                {-1, 0},
                {0, 1},
                {1, 1}
        },
        {
                {0, 0},
                {1, 0},
                {2, 0},
                {0, 1}
        },
        {
                {0, 0},
                {-1, 0},
                {1, 0},
                {0, 1}
        },
        {
                {0, 0},
                {1, 0},
                {2, 0},
                {2, 1}
        },
        {
                {0, 0},
                {1, 0},
                {2, 0},
                {3, 0}
        }
        
};
int N, M, res;
int arr[500][500];

int main(void) {
        scanf("%d %d", &N, &M);

        for (int i = 0; i < N; i++) 
                for (int j = 0; j < M; j++) 
                        scanf("%d", &arr[i][j]);
        
        for (int n = 0; n < 19; n++) {
                for (int i = 0; i < N; i++) {
                        for (int j = 0; j < M; j++) {
                                int idxX[4];
                                int idxY[4];
                                int sum = 0;
                                bool check = false;

                                for (int k = 0; k < 4; k++) {
                                        idxX[k] = i + mapping[n][k][0];
                                        idxY[k] = j + mapping[n][k][1];

                                        if (idxX[k] < 0 || idxX[k] >= N || idxY[k] < 0 || idxY[k] >= M) check = true;
                                }
                                if (check) continue;

                                for (int k = 0; k < 4; k++) {
                                        sum += arr[idxX[k]][idxY[k]];
                                }
                                res = max(res, sum);
                        }
                }
        }

        printf("%d", res);
        return 0;
}